<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-advanced/database" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Database | Geekout 2024 Web Dev Workshop</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://seanjin97.github.io/geekout-2024/img/GeekOut_2022.png"><meta data-rh="true" name="twitter:image" content="https://seanjin97.github.io/geekout-2024/img/GeekOut_2022.png"><meta data-rh="true" property="og:url" content="https://seanjin97.github.io/geekout-2024/docs/advanced/database"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Database | Geekout 2024 Web Dev Workshop"><meta data-rh="true" name="description" content="Prerequisites"><meta data-rh="true" property="og:description" content="Prerequisites"><link data-rh="true" rel="icon" href="/geekout-2024/img/GeekOut.ico"><link data-rh="true" rel="canonical" href="https://seanjin97.github.io/geekout-2024/docs/advanced/database"><link data-rh="true" rel="alternate" href="https://seanjin97.github.io/geekout-2024/docs/advanced/database" hreflang="en"><link data-rh="true" rel="alternate" href="https://seanjin97.github.io/geekout-2024/docs/advanced/database" hreflang="x-default"><link rel="stylesheet" href="/geekout-2024/assets/css/styles.70ff24a8.css">
<script src="/geekout-2024/assets/js/runtime~main.4125c3df.js" defer="defer"></script>
<script src="/geekout-2024/assets/js/main.40d3f523.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/geekout-2024/"><div class="navbar__logo"><img src="/geekout-2024/img/android-chrome-512x512.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/geekout-2024/img/android-chrome-512x512.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Geekout 2024</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/geekout-2024/docs/">Workshop</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/seanjin97/geekout-2024" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geekout-2024/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/geekout-2024/docs/setup/">Setup</a><button aria-label="Expand sidebar category &#x27;Setup&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/geekout-2024/docs/basics/">Backend Basics</a><button aria-label="Expand sidebar category &#x27;Backend Basics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/geekout-2024/docs/advanced/">Backend Advanced</a><button aria-label="Collapse sidebar category &#x27;Backend Advanced&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geekout-2024/docs/advanced/refactoring">Refactoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geekout-2024/docs/advanced/testing">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geekout-2024/docs/advanced/hosting">Hosting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geekout-2024/docs/advanced/auth">Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/geekout-2024/docs/advanced/database">Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geekout-2024/docs/advanced/document-it">API Documentation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/geekout-2024/docs/frontend/">Frontend</a><button aria-label="Expand sidebar category &#x27;Frontend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geekout-2024/docs/self-study-guide/">Self Study Guide</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/geekout-2024/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/geekout-2024/docs/advanced/"><span itemprop="name">Backend Advanced</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Database</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Database</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" href="/geekout-2024/docs/advanced/database#prerequisites">​</a></h2>
<blockquote>
<ol>
<li>Docker. I&#x27;ll not hand hold how to use Docker, so go set it up and figure it out yourselves.</li>
<li>Some knowledge of SQL to be able to appreciate what an ORM does.</li>
</ol>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="code-checkpoint">Code checkpoint<a class="hash-link" aria-label="Direct link to Code checkpoint" title="Direct link to Code checkpoint" href="/geekout-2024/docs/advanced/database#code-checkpoint">​</a></h2>
<p>Before getting started with this exercise, ensure that your code looks like <a href="https://github.com/seanjin97/geekout-2024/tree/master/backend/advanced/refactoring" target="_blank" rel="noopener noreferrer">this</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-use-a-database">Why use a Database?<a class="hash-link" aria-label="Direct link to Why use a Database?" title="Direct link to Why use a Database?" href="/geekout-2024/docs/advanced/database#why-use-a-database">​</a></h2>
<p>Eh abit useless la api but restart server cannot rmb anything alr. Let&#x27;s now make our Todo app&#x27;s data persistent.</p>
<p>When building a REST API server, choosing the right database is crucial to efficiently store and retrieve data. There are two main types of databases: relational and non-relational (NoSQL).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="relational-databases">Relational Databases<a class="hash-link" aria-label="Direct link to Relational Databases" title="Direct link to Relational Databases" href="/geekout-2024/docs/advanced/database#relational-databases">​</a></h2>
<p>Relational databases organize data into tables with predefined schemas, where each table consists of rows (records) and columns (fields). Tables are related to each other using primary and foreign keys. Examples of relational databases include:</p>
<ul>
<li>PostgreSQL (i luv)</li>
<li>MySQL</li>
<li>Oracle Database</li>
<li>Microsoft SQL Server</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="non-relational-nosql-databases">Non-Relational (NoSQL) Databases<a class="hash-link" aria-label="Direct link to Non-Relational (NoSQL) Databases" title="Direct link to Non-Relational (NoSQL) Databases" href="/geekout-2024/docs/advanced/database#non-relational-nosql-databases">​</a></h2>
<p>Non-relational databases, also known as NoSQL databases, provide a flexible schema and scale horizontally. They are designed to handle large amounts of unstructured or semi-structured data. Examples of non-relational databases include:</p>
<ul>
<li>MongoDB</li>
<li>Cassandra</li>
<li>Redis (more for caching)</li>
<li>Couchbase</li>
<li>Firebase Realtime Database</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="comparison-between-relational-and-non-relational-databases">Comparison between Relational and Non-Relational Databases<a class="hash-link" aria-label="Direct link to Comparison between Relational and Non-Relational Databases" title="Direct link to Comparison between Relational and Non-Relational Databases" href="/geekout-2024/docs/advanced/database#comparison-between-relational-and-non-relational-databases">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="similarities">Similarities<a class="hash-link" aria-label="Direct link to Similarities" title="Direct link to Similarities" href="/geekout-2024/docs/advanced/database#similarities">​</a></h3>
<ul>
<li>Both store and retrieve data</li>
<li>Both support CRUD (Create, Read, Update, Delete) operations</li>
<li>Both can be used for various applications</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="differences">Differences<a class="hash-link" aria-label="Direct link to Differences" title="Direct link to Differences" href="/geekout-2024/docs/advanced/database#differences">​</a></h3>
<table><thead><tr><th>Relational Databases</th><th>Non-Relational Databases</th></tr></thead><tbody><tr><td>Fixed schema</td><td>Flexible schema</td></tr><tr><td>Structured data</td><td>Unstructured or semi-structured data</td></tr><tr><td>SQL query language</td><td>NoSQL query languages</td></tr><tr><td>Vertical scaling</td><td>Horizontal scaling</td></tr><tr><td><a href="https://www.mongodb.com/resources/basics/databases/acid-transactions" target="_blank" rel="noopener noreferrer">ACID</a> transactions</td><td>Eventual consistency</td></tr><tr><td>Strong consistency</td><td>Weak consistency</td></tr><tr><td>Suitable for complex queries</td><td>Suitable for large-scale, simple queries</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="object-relational-mapping-orm">Object-Relational Mapping (ORM)<a class="hash-link" aria-label="Direct link to Object-Relational Mapping (ORM)" title="Direct link to Object-Relational Mapping (ORM)" href="/geekout-2024/docs/advanced/database#object-relational-mapping-orm">​</a></h2>
<p>When integrating an Express.js server with a relational database, you often need to map the JSON data received from the client to the corresponding schema in the database. This process is known as Object-Relational Mapping (ORM).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integrating-expressjs-with-a-relational-database-using-typeorm">Integrating Express.js with a Relational Database (using TypeORM)<a class="hash-link" aria-label="Direct link to Integrating Express.js with a Relational Database (using TypeORM)" title="Direct link to Integrating Express.js with a Relational Database (using TypeORM)" href="/geekout-2024/docs/advanced/database#integrating-expressjs-with-a-relational-database-using-typeorm">​</a></h2>
<p>Okay, let&#x27;s just use a relational database for this example. Relational databases are used pretty much everywhere and it&#x27;s probably preferred in most cases. You really can&#x27;t go wrong going with a relational database.</p>
<p>We wanna skill up ourselves to get hired easily, so let&#x27;s focus on relational databases.</p>
<p>Let&#x27;s use the <a href="https://typeorm.io/" target="_blank" rel="noopener noreferrer">TypeORM library</a> as the ORM for our app. Why?
<small><em>idk, i just feel like it. it&#x27;s p robust and popular. The syntax for TypeORM feels quite similar to the way Spring Boot does it. i luv spring boot so let&#x27;s leave it as that. there&#x27;s like 1 million other ORMs you can use so feel free to use any of them instead. but for this example, i&#x27;ll stick to TypeORM.</em></small></p>
<p>TypeORM supports various relational databases and provides a convenient way to define entities and interact with the database.</p>
<p>Let&#x27;s start by reading the docs @ <a href="https://typeorm.io/" target="_blank" rel="noopener noreferrer">https://typeorm.io/</a> and specifically <a href="https://typeorm.io/usage-with-javascript" target="_blank" rel="noopener noreferrer">https://typeorm.io/usage-with-javascript</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ok-need-to-install-dependencies">ok need to install dependencies<a class="hash-link" aria-label="Direct link to ok need to install dependencies" title="Direct link to ok need to install dependencies" href="/geekout-2024/docs/advanced/database#ok-need-to-install-dependencies">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">npm install typeorm pg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-datasource">Configure datasource<a class="hash-link" aria-label="Direct link to Configure datasource" title="Direct link to Configure datasource" href="/geekout-2024/docs/advanced/database#configure-datasource">​</a></h3>
<p>Let&#x27;s write this into a new file called <code>database.js</code> that contains all configuration related to our database.</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> typeorm </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;typeorm&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token maybe-class-name">Todo</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">typeorm</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">EntitySchema</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Todo&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">columns</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">primary</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;int&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">generated</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;varchar&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">completed</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;boolean&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword module" style="color:#00009f">default</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> dataSource </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">typeorm</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">DataSource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;postgres&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">host</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;localhost&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">port</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5432</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">username</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;postgres&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">password</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;password&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">database</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;postgres&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">synchronize</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">logging</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">entities</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token maybe-class-name">Todo</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> dataSource </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>and in <code>app.js</code></p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> dataSource </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./database&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ...rest of your code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dataSource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">8000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Server is running on port 8000&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="but-wait-where-is-our-database">But wait, where is our database??<a class="hash-link" aria-label="Direct link to But wait, where is our database??" title="Direct link to But wait, where is our database??" href="/geekout-2024/docs/advanced/database#but-wait-where-is-our-database">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lets-spin-it-up-using-docker">Let&#x27;s spin it up using Docker.<a class="hash-link" aria-label="Direct link to Let&#x27;s spin it up using Docker." title="Direct link to Let&#x27;s spin it up using Docker." href="/geekout-2024/docs/advanced/database#lets-spin-it-up-using-docker">​</a></h3>
<p>Why? It&#x27;s just so much more convenient, and if anything goes wrong, just delete the container and re-initialise another.</p>
<p>We&#x27;ll need the <a href="https://hub.docker.com/_/postgres" target="_blank" rel="noopener noreferrer">postgreSQL image</a> to run. In our case, let&#x27;s use the version tag <code>16.3-alpine3.20</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --name postgres-db -e POSTGRES_PASSWORD=password -d postgres:16.3-alpine3.20</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="breaking-it-down">Breaking it down<a class="hash-link" aria-label="Direct link to Breaking it down" title="Direct link to Breaking it down" href="/geekout-2024/docs/advanced/database#breaking-it-down">​</a></h3>
<p><code>docker run</code>: This command is used to start a new container from a Docker image.</p>
<p><code>--name postgres-db</code>: This option sets the name of the container to &quot;postgres-db&quot;. You can choose any name you prefer for your PostgreSQL container.</p>
<p><code>-e POSTGRES_PASSWORD=password</code>: This option sets an environment variable inside the container. In this case, it sets the POSTGRES_PASSWORD environment variable to &quot;password&quot;. This environment variable is used by the PostgreSQL image to set the password for the default &quot;postgres&quot; user. You should replace &quot;password&quot; with a strong and secure password of your choice.</p>
<p><code>-d</code>: This option runs the container in detached mode. It means that the container will run in the background, and you can continue using the terminal for other tasks.</p>
<p><code>postgres:16.3-alpine3.20</code>: This specifies the Docker image to be used for creating the container. In this case, it uses the &quot;postgres&quot; image with the tag &quot;16.3-alpine3.20&quot;. This particular image is based on Alpine Linux version 3.20 and includes PostgreSQL version 16.3.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="to-verify-that-our-database-is-running">To verify that our database is running:<a class="hash-link" aria-label="Direct link to To verify that our database is running:" title="Direct link to To verify that our database is running:" href="/geekout-2024/docs/advanced/database#to-verify-that-our-database-is-running">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker ps</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You should see that a container called <code>postgres-db</code> is running.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-our-app-with-our-database">Running our app with our database<a class="hash-link" aria-label="Direct link to Running our app with our database" title="Direct link to Running our app with our database" href="/geekout-2024/docs/advanced/database#running-our-app-with-our-database">​</a></h2>
<p>Now let&#x27;s do a npm run start.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">node app.js</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>And now we observe that a bunch of SQL statements are printed out in the terminal console.</p>
<p>To verify that the <code>todo</code> table was auto created for us, we can run these commands.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="we-need-to-first-enter-the-docker-container">We need to first enter the docker container<a class="hash-link" aria-label="Direct link to We need to first enter the docker container" title="Direct link to We need to first enter the docker container" href="/geekout-2024/docs/advanced/database#we-need-to-first-enter-the-docker-container">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker exec -it postgres-db psql -U postgres</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Breaking it down:</p>
<ol>
<li>
<p><code>docker exec</code>: This is the Docker command used to execute a command within a running Docker container.</p>
</li>
<li>
<p><code>-it</code>: These are two flags used with docker exec:</p>
</li>
<li>
<p><code>-i</code> (interactive) keeps STDIN open, allowing you to interact with the container&#x27;s command.</p>
</li>
<li>
<p><code>-t</code> (tty) allocates a pseudo-terminal, which enables you to use terminal features like command editing and history.</p>
</li>
<li>
<p><code>postgres-db</code>: This is the name or ID of the running Docker container that you want to execute the command in. In this case, it assumes that you have a container named postgres-db running a PostgreSQL database.</p>
</li>
<li>
<p><code>psql</code>: This is the command that you want to execute within the container. psql is the command-line interface for interacting with PostgreSQL databases.</p>
</li>
<li>
<p><code>-U postgres</code>: This is an option passed to the psql command. The -U flag specifies the username to connect to the PostgreSQL database. In this case, it assumes that you want to connect as the default postgres user.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="then-now-from-within-the-container-we-check-if-the-table-has-been-created">Then, now from within the container we check if the table has been created<a class="hash-link" aria-label="Direct link to Then, now from within the container we check if the table has been created" title="Direct link to Then, now from within the container we check if the table has been created" href="/geekout-2024/docs/advanced/database#then-now-from-within-the-container-we-check-if-the-table-has-been-created">​</a></h3>
<p>This command describes the tables in your postgreSQL database.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This command selects all rows from the table <code>todo</code>;</p>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> todo</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="view table" src="data:image/png;base64,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" width="395" height="231" class="img_ev3q"></p>
<p>If you&#x27;re able to see the table created successfully, then we&#x27;re good here.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="updating-our-utils-functions-to-work-with-our-postgresql-database">Updating our <code>utils</code> functions to work with our PostgreSQL database<a class="hash-link" aria-label="Direct link to updating-our-utils-functions-to-work-with-our-postgresql-database" title="Direct link to updating-our-utils-functions-to-work-with-our-postgresql-database" href="/geekout-2024/docs/advanced/database#updating-our-utils-functions-to-work-with-our-postgresql-database">​</a></h2>
<p>During the <a href="/geekout-2024/docs/advanced/refactoring">Refactoring</a> section, we extracted out the code that retrieved, created, updated or deleted data from our <code>todos.json</code>.</p>
<p>Let&#x27;s now update those functions to work with our database instead.</p>
<p>Notice how much our lives have been made easier by keeping our code clean?
We can easily just update those functions that interact with the <code>todos.json</code> file to now interact with the database.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-readexistingtodos">Update <code>readExistingTodos()</code><a class="hash-link" aria-label="Direct link to update-readexistingtodos" title="Direct link to update-readexistingtodos" href="/geekout-2024/docs/advanced/database#update-readexistingtodos">​</a></h3>
<p>Before: This function read <code>todos.json</code> and then parsed it into a javascript object.</p>
<p>Now: This function should read the table <code>todo</code> and parse the data as a javascript object. By reading the TypeORM docs, we figure that we need to use the TypeORM <code>.find()</code> method.</p>
<p>Updated code:</p>
<p><code>utils.js</code></p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todoRepository </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dataSource</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getRepository</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;todo&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">readExistingTodos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> existingTodos </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> todoRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">find</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> existingTodos</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Changes:</p>
<ol>
<li>We made readExistingTodos an <code>async</code> function so that we can <code>await</code> the asynchronous database action. (<a href="https://www.freecodecamp.org/news/javascript-async-await/" target="_blank" rel="noopener noreferrer">What is this async await thingy???</a>)</li>
<li>We initilised the <code>todoRepository</code> and then used the <code>.find()</code> method to query all data in the <code>todo</code> table.</li>
<li>TypeORM automatically parses the data retrieved into a native javascript object. We no longer need the <code>JSON.parse</code> piece of code.</li>
</ol>
<p><code>app.js</code></p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/todos&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> existingTodos </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">readExistingTodos</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">existingTodos</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Changes:</p>
<ol>
<li>We added the <code>await</code> to the <code>readExistingTodos()</code> function call.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-readexistingtodos-1">Update <code>readExistingTodos()</code><a class="hash-link" aria-label="Direct link to update-readexistingtodos-1" title="Direct link to update-readexistingtodos-1" href="/geekout-2024/docs/advanced/database#update-readexistingtodos-1">​</a></h3>
<p>Before: This function read the entire <code>todos.json</code> and then used the javascript <code>.find</code> method to find a todo by it&#x27;s <code>id</code>.</p>
<p>Now: This function should use SQL queries for the database to retrieve the todo with the matching <code>id</code>. The query and filtering is now performed by the database instead of our code. By reading the TypeORM docs, we figure that we need to use the <code>.findOneBy({id: id})</code> method.</p>
<p><code>utils.js</code></p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSpecificTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> theTodoIWant </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> todoRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">findOneBy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> id </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> theTodoIWant</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>app.js</code></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/todos/:id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todoId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Number</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">params</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> theTodoIwant </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSpecificTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// What if I can&#x27;t find the todo item? I need to handle it with grace</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">theTodoIwant</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">error</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;cannot find the todo bro&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">theTodoIwant</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-post-todos">Update <code>POST /todos</code><a class="hash-link" aria-label="Direct link to update-post-todos" title="Direct link to update-post-todos" href="/geekout-2024/docs/advanced/database#update-post-todos">​</a></h3>
<p>With a database, the logic to create a row in the table is now abstracted by TypeORM. We need to overhaul and rewrite this entire API route.</p>
<p>Before: This API route creates a new <code>todo</code> task and merges it with hte rest of the <code>todos</code>.</p>
<p>Now: This API should simply create a new todo using TypeORM. From the TypeORM docs, we figure that we need to use the <code>.save(todo)</code> method.</p>
<p><code>utils.js</code></p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">saveTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">todo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> todoRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">save</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//other exports</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  saveTodo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Changes:</p>
<ol>
<li>We created a new <code>saveTodo</code> function that calls <code>todoRepository.save</code>. It automatically generates an <code>id</code> and sets <code>completed</code> to <code>false</code> by default.</li>
</ol>
<p><code>app.js</code></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">post</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/todos&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Logic to create a new todo item</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> requestBody </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newTodoItemDescription </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> requestBody</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">description</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// What if there&#x27;s no description field given?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">newTodoItemDescription</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">error</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;no description bro&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> newTodoItem </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">description</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> newTodoItemDescription</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> createdTodoItem </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">saveTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newTodoItem</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">201</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">createdTodoItem</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Changes:</p>
<ol>
<li>We now call the <code>saveTodo</code> function from <code>utils</code>.</li>
<li>We no longer need to generate the <code>id</code> nor set <code>completed</code> to <code>false</code> since the <code>id</code> is auto generated by the database, and the <code>completed</code> field is set to <code>false</code> by default in the <code>EntitySchema</code> in <code>database.js</code>.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-put-todos">Update <code>PUT /todos</code><a class="hash-link" aria-label="Direct link to update-put-todos" title="Direct link to update-put-todos" href="/geekout-2024/docs/advanced/database#update-put-todos">​</a></h3>
<p>With a database, the logic to update a row in the table is now abstracted by TypeORM. We need to overhaul and rewrite this entire API route.</p>
<p>Before: This API route contains a lot of unneccesary code now that we&#x27;re using a database. They are no longer needed.</p>
<p>Now: This API should simply update an existing todo using TypeORM. From the TypeORM docs, we figure that we need to use the <code>.save(todo)</code> method, but now the todo would contain the <code>id</code> and <code>completed</code> field to signal that it&#x27;s an update instead of a creation of a new todo.</p>
<p><code>app.js</code></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">put</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/todos/:id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todoId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Number</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">params</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> requestBody </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">body</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// What if there&#x27;s no request body</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">requestBody</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">error</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;no request body&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> description </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> requestBody</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">description</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> completed </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> requestBody</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">completed</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> checkIfTodoExists </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSpecificTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todoToUpdate </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">id</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> todoId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    completed</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">checkIfTodoExists</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">400</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;todo not found&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> updatedTodoItem </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">saveTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todoToUpdate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">updatedTodoItem</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Changes:</p>
<ol>
<li>We now call the <code>saveTodo</code> function from <code>utils</code>.</li>
<li>We check if the <code>todo</code> exists before attempting to update it.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-delete-todos">Update <code>DELETE /todos</code><a class="hash-link" aria-label="Direct link to update-delete-todos" title="Direct link to update-delete-todos" href="/geekout-2024/docs/advanced/database#update-delete-todos">​</a></h3>
<p>With a database, the logic to update a row in the table is now abstracted by TypeORM. We need to overhaul and rewrite this entire API route.</p>
<p>Before: This API route contains code to get all the todos, then manually filter out the <code>todo</code> that is to be deleted before writing it to the JSON file.</p>
<p>Now: This API should use TypeORM to delete a <code>todo</code> item by the given <code>id</code>. We figure from the TypeORM docs that we can use the <code>.delete(id)</code> method to delete a <code>todo</code> by it&#x27;s <code>id</code>.</p>
<p><code>utils.js</code></p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">deleteTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">todoId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> todoRepository</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// rest of the exports,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deleteTodo</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Changes:</p>
<ol>
<li>We create a new function called <code>deleteTodo</code> that encapsulates the TypeORM delete method call.</li>
</ol>
<p><code>app.js</code></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;/todos/:id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">req</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> res</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> todoId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Number</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">req</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">params</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">deleteTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todoId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> res</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">status</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">204</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">json</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Changes:</p>
<ol>
<li>We now call the <code>deleteTodo</code> function from <code>utils</code>.</li>
<li>Notice that we&#x27;re not performing any checks to see if we are truly deleting an existing <code>todo</code>. The <code>DELETE</code> API method is <a href="https://blog.dreamfactory.com/what-is-idempotency/" target="_blank" rel="noopener noreferrer">idempotent</a>, meaning that calling it multiple times should produce the same result even when the same operation is repeated many times. If we try to delete an <code>id</code> that does not exist, then technically it&#x27;s already &quot;deleted&quot; from our system innit. But it depends on how you want your application to behave.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="updating-your-tests">Updating your tests<a class="hash-link" aria-label="Direct link to Updating your tests" title="Direct link to Updating your tests" href="/geekout-2024/docs/advanced/database#updating-your-tests">​</a></h2>
<p>If you did the <a href="/geekout-2024/docs/advanced/testing">Testing</a> exercise earlier, you&#x27;ll now realise that all your existing test cases might fail and you&#x27;ll now need to add new test cases.</p>
<p>Again, you can use chatgpt to rewrite/ modify your tests or do it manually.</p>
<p>Make sure to mock the database functions. This way we can test our application logic without having an actual database connected during unit tests.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" href="/geekout-2024/docs/advanced/database#conclusion">​</a></h2>
<p>In this section we learnt how to run a database locally using <code>Docker</code>, then updated our application to use the database to retrieve or manipulate data instead of writing to a JSON file.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="final-code">Final Code<a class="hash-link" aria-label="Direct link to Final Code" title="Direct link to Final Code" href="/geekout-2024/docs/advanced/database#final-code">​</a></h2>
<p>Full code here: <a href="https://github.com/seanjin97/geekout-2024/tree/master/backend/advanced/database" target="_blank" rel="noopener noreferrer">https://github.com/seanjin97/geekout-2024/tree/master/backend/advanced/database</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional-challenge-integrate-with-a-cloud-database">Optional Challenge: Integrate with a cloud database<a class="hash-link" aria-label="Direct link to Optional Challenge: Integrate with a cloud database" title="Direct link to Optional Challenge: Integrate with a cloud database" href="/geekout-2024/docs/advanced/database#optional-challenge-integrate-with-a-cloud-database">​</a></h2>
<p>anudder lil challenge for ya.</p>
<p>This exercise integrates our express server with a local postgreSQL database. This means that now our application wouldn&#x27;t work once we&#x27;ve deployed it, unless we create a cloud database and link it to our server.</p>
<p>I want you to use a cloud PostgreSQL database service provider (Render, Supabase, etc) and link our Express.js application to it.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="steps-at-a-high-level">Steps at a high level<a class="hash-link" aria-label="Direct link to Steps at a high level" title="Direct link to Steps at a high level" href="/geekout-2024/docs/advanced/database#steps-at-a-high-level">​</a></h3>
<ol>
<li>Create a PostgreSQL database on your cloud service provider of choice. Can&#x27;t really go wrong with Supabase honestly but das what I would choose cuz I like their developer experience.</li>
<li>Update the database configuration in <code>database.js</code> to connect to your cloud PostgreSQL database.</li>
<li>Optionally, use environment variables for your database configurations e.g.</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> dataSource </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">typeorm</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">DataSource</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;postgres&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">host</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">DB_HOST</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">port</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">DB_PORT</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">username</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">DB_USERNAME</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">password</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">DB_PASSWORD</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">database</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;postgres&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">synchronize</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">logging</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">entities</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token maybe-class-name">Todo</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="4">
<li>Read in the environment variables from a <code>.env</code> file or from the host computer&#x27;s environment.</li>
</ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/seanjin97/geekout-2024/tree/master/docs/docs/advanced/database.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/geekout-2024/docs/advanced/auth"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Security</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/geekout-2024/docs/advanced/document-it"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Documentation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#prerequisites">Prerequisites</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#code-checkpoint">Code checkpoint</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#why-use-a-database">Why use a Database?</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#relational-databases">Relational Databases</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#non-relational-nosql-databases">Non-Relational (NoSQL) Databases</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#comparison-between-relational-and-non-relational-databases">Comparison between Relational and Non-Relational Databases</a><ul><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#similarities">Similarities</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#differences">Differences</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#object-relational-mapping-orm">Object-Relational Mapping (ORM)</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#integrating-expressjs-with-a-relational-database-using-typeorm">Integrating Express.js with a Relational Database (using TypeORM)</a><ul><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#ok-need-to-install-dependencies">ok need to install dependencies</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#configure-datasource">Configure datasource</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#but-wait-where-is-our-database">But wait, where is our database??</a><ul><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#lets-spin-it-up-using-docker">Let&#39;s spin it up using Docker.</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#breaking-it-down">Breaking it down</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#to-verify-that-our-database-is-running">To verify that our database is running:</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#running-our-app-with-our-database">Running our app with our database</a><ul><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#we-need-to-first-enter-the-docker-container">We need to first enter the docker container</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#then-now-from-within-the-container-we-check-if-the-table-has-been-created">Then, now from within the container we check if the table has been created</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#updating-our-utils-functions-to-work-with-our-postgresql-database">Updating our <code>utils</code> functions to work with our PostgreSQL database</a><ul><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#update-readexistingtodos">Update <code>readExistingTodos()</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#update-readexistingtodos-1">Update <code>readExistingTodos()</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#update-post-todos">Update <code>POST /todos</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#update-put-todos">Update <code>PUT /todos</code></a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#update-delete-todos">Update <code>DELETE /todos</code></a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#updating-your-tests">Updating your tests</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#conclusion">Conclusion</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#final-code">Final Code</a></li><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#optional-challenge-integrate-with-a-cloud-database">Optional Challenge: Integrate with a cloud database</a><ul><li><a class="table-of-contents__link toc-highlight" href="/geekout-2024/docs/advanced/database#steps-at-a-high-level">Steps at a high level</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/geekout-2024/docs">Workshop</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/cHst4FEY" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>