"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2359],{3485:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var i=s(4848),t=s(8453);const o={sidebar_position:9},r="API Documentation",a={id:"advanced/document-it",title:"API Documentation",description:"Code checkpoint",source:"@site/docs/advanced/document-it.md",sourceDirName:"advanced",slug:"/advanced/document-it",permalink:"/geekout-2024/docs/advanced/document-it",draft:!1,unlisted:!1,editUrl:"https://github.com/seanjin97/geekout-2024/tree/master/docs/docs/advanced/document-it.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"Database",permalink:"/geekout-2024/docs/advanced/database"},next:{title:"Frontend",permalink:"/geekout-2024/docs/frontend/"}},c={},d=[{value:"Code checkpoint",id:"code-checkpoint",level:2},{value:"Why have API docs??",id:"why-have-api-docs",level:2},{value:"Documenting Your Express APIs",id:"documenting-your-express-apis",level:2},{value:"Understanding OpenAPI Specification and Swagger",id:"understanding-openapi-specification-and-swagger",level:2},{value:"What is OpenAPI Specification?",id:"what-is-openapi-specification",level:3},{value:"What is Swagger?",id:"what-is-swagger",level:3},{value:"Writing an OpenAPI Spec for REST APIs",id:"writing-an-openapi-spec-for-rest-apis",level:2},{value:"Example: Documenting an Express.js API Route",id:"example-documenting-an-expressjs-api-route",level:2},{value:"Library for Express.js",id:"library-for-expressjs",level:2},{value:"First install the dependencies",id:"first-install-the-dependencies",level:3},{value:"Create a file called <code>swagger.yaml</code>",id:"create-a-file-called-swaggeryaml",level:3},{value:"Write your API docs in <code>swagger.yaml</code>",id:"write-your-api-docs-in-swaggeryaml",level:3},{value:"Configure our Expres.js app to serve the swagger",id:"configure-our-expresjs-app-to-serve-the-swagger",level:3},{value:"Conclusion",id:"conclusion",level:2},{value:"Final Code",id:"final-code",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"api-documentation",children:"API Documentation"}),"\n",(0,i.jsx)(n.h2,{id:"code-checkpoint",children:"Code checkpoint"}),"\n",(0,i.jsxs)(n.p,{children:["Before getting started with this exercise, ensure that your code looks like ",(0,i.jsx)(n.a,{href:"https://github.com/seanjin97/geekout-2024/tree/master/backend/advanced/refactoring",children:"this"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"why-have-api-docs",children:"Why have API docs??"}),"\n",(0,i.jsx)(n.p,{children:"As a developer, it's important to document your APIs so that:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Clarity and Understanding"}),": API documentation provides a clear explanation of what your API does, how it works, and how to use it effectively. It serves as a guide for both your team members and external developers who may integrate with your API."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Easier Adoption and Integration"}),": Well-documented APIs are easier for developers to understand and integrate into their own applications. Clear documentation reduces the learning curve and helps developers get started quickly, increasing the likelihood of adoption and usage of your API."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Improved Collaboration"}),": API documentation facilitates collaboration among team members. It acts as a central reference point, ensuring that everyone has a shared understanding of the API's functionality, endpoints, request/response formats, and any specific requirements or constraints."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Maintainability and Future Development"}),": As your API evolves over time, having comprehensive documentation makes it easier to maintain and update. New team members can quickly grasp the API's structure and functionality, reducing the time needed for onboarding and knowledge transfer."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Better API Discoverability"}),": Documenting your APIs makes them more discoverable. Developers can easily find and explore the available endpoints, understand the functionality offered, and determine if your API meets their requirements. This increases the visibility of your API and attracts potential users."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"documenting-your-express-apis",children:"Documenting Your Express APIs"}),"\n",(0,i.jsx)(n.p,{children:"honestly, just chatgpt it. aint nobody got time for allat."}),"\n",(0,i.jsx)(n.h2,{id:"understanding-openapi-specification-and-swagger",children:"Understanding OpenAPI Specification and Swagger"}),"\n",(0,i.jsx)(n.h3,{id:"what-is-openapi-specification",children:"What is OpenAPI Specification?"}),"\n",(0,i.jsx)(n.p,{children:"The OpenAPI Specification (OAS) is a standard, language-agnostic interface to RESTful APIs which allows both humans and computers to discover and understand the capabilities of the service without access to source code, documentation, or through network traffic inspection. When properly defined, a consumer can understand and interact with the remote service with a minimal amount of implementation logic."}),"\n",(0,i.jsx)(n.h3,{id:"what-is-swagger",children:"What is Swagger?"}),"\n",(0,i.jsx)(n.p,{children:"Swagger is a set of open-source tools built around the OpenAPI Specification that can help you design, build, document and consume REST APIs. The major Swagger tools include:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Swagger Editor \u2013 browser-based editor where you can write OpenAPI specs."}),"\n",(0,i.jsx)(n.li,{children:"Swagger UI \u2013 renders OpenAPI specs as interactive API documentation."}),"\n",(0,i.jsx)(n.li,{children:"Swagger Codegen \u2013 generates server stubs and client libraries from an OpenAPI spec."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"writing-an-openapi-spec-for-rest-apis",children:"Writing an OpenAPI Spec for REST APIs"}),"\n",(0,i.jsx)(n.p,{children:"When writing an OpenAPI spec for your REST APIs, you should include the following information:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Basic Information"}),": Specify the OpenAPI version, info (title, version, description), servers (base URL for the API)."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Paths"}),": Define the available endpoints (paths) and operations for each endpoint (e.g., GET /users, POST /users). For each operation, specify:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Operation description"}),"\n",(0,i.jsx)(n.li,{children:"Operation parameters"}),"\n",(0,i.jsx)(n.li,{children:"Request body (if any)"}),"\n",(0,i.jsx)(n.li,{children:"Response body for different status codes"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Components"}),": Define the reusable components such as schemas (data models), parameters, responses, etc."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Security"}),": Specify the security schemes (e.g., JWT, OAuth2) and security requirements for each operation."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"example-documenting-an-expressjs-api-route",children:"Example: Documenting an Express.js API Route"}),"\n",(0,i.jsxs)(n.p,{children:["Here's an example of how we can document an our ",(0,i.jsx)(n.code,{children:"GET /todos"})," API route using the OpenAPI spec:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'openapi: 3.0.3\ninfo:\n  title: Todo List API\n  description: |-\n    some description\n  version: 1.0.0\npaths:\n  /todos:\n    get:\n      summary: Get all todos\n      description: Retrieve a list of all todos\n      responses:\n        "200":\n          description: Successful response\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: "#/components/schemas/Todo"\ncomponents:\n  schemas:\n    Todo:\n      type: object\n      required:\n        - id\n        - title\n        - completed\n      properties:\n        id:\n          type: integer\n          description: The unique ID of the todo.\n        description:\n          type: string\n          description: The title of the todo.\n        completed:\n          type: boolean\n          description: Indicates if the todo is completed or not.\n'})}),"\n",(0,i.jsx)(n.p,{children:"In this example:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["We define a ",(0,i.jsx)(n.code,{children:"GET /todos"})," endpoint under the paths section."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"summary"})," provides a short description of the endpoint."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"description"})," gives a more detailed explanation of what the endpoint does."]}),"\n",(0,i.jsxs)(n.li,{children:["Under ",(0,i.jsx)(n.code,{children:"responses"}),", we specify the 200 status code for a successful response."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"content"})," section describes the response body format, which is ",(0,i.jsx)(n.code,{children:"application/json"})," in this case."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"schema"})," defines the structure of the response data, which is an array of Todo objects."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.code,{children:"Todo"})," schema is defined in the components/schemas section, specifying the required properties (",(0,i.jsx)(n.code,{children:"id"}),", ",(0,i.jsx)(n.code,{children:"title"}),", ",(0,i.jsx)(n.code,{children:"completed"}),") and their types."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Paste the above yaml text to ",(0,i.jsx)(n.a,{href:"https://editor.swagger.io/",children:"https://editor.swagger.io/"})," and see how it looks like."]}),"\n",(0,i.jsx)(n.h2,{id:"library-for-expressjs",children:"Library for Express.js"}),"\n",(0,i.jsxs)(n.p,{children:["For Express.js, we can use the package ",(0,i.jsx)(n.code,{children:"swagger-ui-express"})," to serve the generated OpenAPI specs as interactive documentation."]}),"\n",(0,i.jsx)(n.h3,{id:"first-install-the-dependencies",children:"First install the dependencies"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install express yaml swagger-ui-express\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"create-a-file-called-swaggeryaml",children:["Create a file called ",(0,i.jsx)(n.code,{children:"swagger.yaml"})]}),"\n",(0,i.jsxs)(n.p,{children:["First create a ",(0,i.jsx)(n.code,{children:"swagger.yaml"})," file that will contain the Open API spec formatted API documentation."]}),"\n",(0,i.jsxs)(n.h3,{id:"write-your-api-docs-in-swaggeryaml",children:["Write your API docs in ",(0,i.jsx)(n.code,{children:"swagger.yaml"})]}),"\n",(0,i.jsx)("small",{children:"god bless chatgpt this is what it's good for, else we'd have to manually write it all out."}),"\n",(0,i.jsxs)(n.p,{children:["Prompt: ",(0,i.jsx)(n.code,{children:"write me a yaml file that contains the api documenation of this express.js todo list api in open api specification."})," and add ",(0,i.jsx)(n.code,{children:"app.js"})," to the chatgpt context."]}),"\n",(0,i.jsx)(n.h3,{id:"configure-our-expresjs-app-to-serve-the-swagger",children:"Configure our Expres.js app to serve the swagger"}),"\n",(0,i.jsxs)(n.p,{children:["Update ",(0,i.jsx)(n.code,{children:"app.js"})," to include the following."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'const fs = require("fs");\nconst swaggerUi = require("swagger-ui-express");\nconst YAML = require("yaml");\n\nconst app = express();\n\nconst file = fs.readFileSync("./swagger.yaml", "utf8");\nconst swaggerDocument = YAML.parse(file);\n\napp.use("/docs", swaggerUi.serve, swaggerUi.setup(swaggerDocument));\n\n// rest of your code\n'})}),"\n",(0,i.jsxs)(n.p,{children:["With this setup, you can write OpenAPI specs in your code comments and access the interactive API documentation at ",(0,i.jsx)(n.code,{children:"http://localhost:8000/docs"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsxs)(n.p,{children:["Observe how the ",(0,i.jsx)(n.code,{children:"/docs"})," endpoint serves a similar Swagger UI as the online ",(0,i.jsx)(n.a,{href:"https://editor.swagger.io/",children:"Swagger Editor"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:['The next time someone asks you "eh how to use your APIs?", they can self help themselves at the ',(0,i.jsx)(n.code,{children:"/docs"})," endpoint."]}),"\n",(0,i.jsx)(n.h2,{id:"final-code",children:"Final Code"}),"\n",(0,i.jsxs)(n.p,{children:["Full code here: ",(0,i.jsx)(n.a,{href:"https://github.com/seanjin97/geekout-2024/tree/master/backend/advanced/documentation",children:"https://github.com/seanjin97/geekout-2024/tree/master/backend/advanced/documentation"})]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var i=s(6540);const t={},o=i.createContext(t);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);