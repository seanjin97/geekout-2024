"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7988],{9820:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>c});var o=s(4848),n=s(8453);const i={sidebar_position:4},d="1.3. Create a New Todo Task v1",r={id:"basics/todo-list/create-a-todo-task-v1",title:"1.3. Create a New Todo Task v1",description:"Designing the API:",source:"@site/docs/basics/todo-list/create-a-todo-task-v1.md",sourceDirName:"basics/todo-list",slug:"/basics/todo-list/create-a-todo-task-v1",permalink:"/geekout-2024/docs/basics/todo-list/create-a-todo-task-v1",draft:!1,unlisted:!1,editUrl:"https://github.com/seanjin97/geekout-2024/tree/master/docs/docs/basics/todo-list/create-a-todo-task-v1.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Improving developer productivity",permalink:"/geekout-2024/docs/basics/todo-list/making-our-lives-better"},next:{title:"1.3. Create a New Todo Task v2",permalink:"/geekout-2024/docs/basics/todo-list/create-a-todo-task-v2"}},a={},c=[{value:"Designing the API:",id:"designing-the-api",level:2},{value:"Diving into the code",id:"diving-into-the-code",level:2}];function l(e){const t={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"13-create-a-new-todo-task-v1",children:"1.3. Create a New Todo Task v1"}),"\n",(0,o.jsx)(t.h2,{id:"designing-the-api",children:"Designing the API:"}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"Given"}),(0,o.jsx)(t.th,{children:"When"}),(0,o.jsx)(t.th,{children:"Then"})]})}),(0,o.jsx)(t.tbody,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"As a todo list user"}),(0,o.jsx)(t.td,{children:"I want to add a new todo task"}),(0,o.jsx)(t.td,{children:"I call this API with all the fields and the server should tell me that it's been created successfully or not"})]})})]}),"\n",(0,o.jsxs)(t.p,{children:["It's a ",(0,o.jsx)(t.code,{children:"POST"})," request because we are creating data."]}),"\n",(0,o.jsxs)(t.p,{children:["The endpoint we should create is ",(0,o.jsx)(t.code,{children:"POST /todos"})," where we take in a request body with the necessary todo info."]}),"\n",(0,o.jsx)(t.h2,{id:"diving-into-the-code",children:"Diving into the code"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:'// Automatically read request body as JSON\napp.use(express.json());\n\napp.post("/todos", (req, res) => {\n  // Logic to create a new todo item\n  const requestBody = req.body;\n\n  const todosJson = fs.readFileSync("./todos.json");\n  const existingTodos = JSON.parse(todosJson);\n\n  // What if there\'s no request body?\n  if (!requestBody) {\n    res.status(400).json({ error: "no request body provided" });\n  }\n\n  const updatedListOfTodos = [...existingTodos, newTodo];\n\n  fs.writeFileSync("./todos.json", JSON.stringify(updatedListOfTodos));\n\n  res.status(201).json(newTodoItem);\n});\n'})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsxs)(t.strong,{children:["Previously, we only created ",(0,o.jsx)(t.code,{children:"GET"})," APIs that can be hit from the browser since every browser page visit is a GET request."]})}),"\n",(0,o.jsxs)(t.p,{children:["What about ",(0,o.jsx)(t.code,{children:"POST"})," requests then? How can we test this ",(0,o.jsx)(t.code,{children:"POST"})," API endpoint? We'll use an API Client. It could be any API Client, but let's stick with Postman."]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["The ",(0,o.jsx)(t.code,{children:"POST /todos"})," endpoint is used to create a new todo item."]}),"\n",(0,o.jsx)(t.li,{children:"It accepts the todo data in the request body and creates a new todo item based on that data."}),"\n",(0,o.jsx)(t.li,{children:"Upon successful creation, it responds with a status code of 201 (Created) and returns the newly created todo item in the response body."}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>d,x:()=>r});var o=s(6540);const n={},i=o.createContext(n);function d(e){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);