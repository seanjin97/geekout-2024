"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[514],{8080:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var s=n(4848),i=n(8453);const a={sidebar_position:4},r="Authentication",o={id:"advanced/auth",title:"Authentication",description:"Now that I've hosted my backend server, got people keep attacking my api la how. put authentication lor.",source:"@site/docs/advanced/auth.md",sourceDirName:"advanced",slug:"/advanced/auth",permalink:"/geekout-2024/docs/advanced/auth",draft:!1,unlisted:!1,editUrl:"https://github.com/seanjin97/geekout-2024/tree/master/docs/docs/advanced/auth.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Hosting",permalink:"/geekout-2024/docs/advanced/hosting"},next:{title:"database",permalink:"/geekout-2024/docs/advanced/database"}},h={},c=[{value:"1. Basic Authentication",id:"1-basic-authentication",level:2},{value:"How it works",id:"how-it-works",level:3},{value:"Explain like im 5??",id:"explain-like-im-5",level:3},{value:"Example using Express.js",id:"example-using-expressjs",level:3},{value:"2. API Key Authentication",id:"2-api-key-authentication",level:2},{value:"How it works",id:"how-it-works-1",level:3},{value:"Explain like im 5",id:"explain-like-im-5-1",level:3},{value:"Example using Express.js",id:"example-using-expressjs-1",level:3},{value:"3. JWT Authentication",id:"3-jwt-authentication",level:2},{value:"How it works",id:"how-it-works-2",level:3},{value:"Explain like im 5",id:"explain-like-im-5-2",level:3},{value:"Example using Express.js",id:"example-using-expressjs-2",level:3},{value:"Conclusion",id:"conclusion",level:2},{value:"Solution Architecture",id:"solution-architecture",level:3},{value:"Without a security layer",id:"without-a-security-layer",level:4},{value:"With a security layer",id:"with-a-security-layer",level:4},{value:"Security layer using AWS",id:"security-layer-using-aws",level:4}];function l(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"authentication",children:"Authentication"}),"\n",(0,s.jsx)("small",{children:(0,s.jsx)(t.em,{children:"Now that I've hosted my backend server, got people keep attacking my api la how. put authentication lor."})}),"\n",(0,s.jsx)(t.p,{children:"When building a REST API server, it's important to secure your endpoints to ensure that only authorized users can access and manipulate the data. There are several types of authentication that can be implemented in a REST API. Let's explore a few common ones. Ordered from easiest (less secure) to hardest (most secure)."}),"\n",(0,s.jsx)(t.h2,{id:"1-basic-authentication",children:"1. Basic Authentication"}),"\n",(0,s.jsxs)(t.p,{children:["Basic Authentication is a simple authentication scheme where the client sends the username and password in the ",(0,s.jsx)(t.code,{children:"Authorization"})," header of the HTTP request. The credentials are encoded using Base64 encoding."]}),"\n",(0,s.jsx)(t.h3,{id:"how-it-works",children:"How it works"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["The client includes the ",(0,s.jsx)(t.code,{children:"Authorization"})," header in the HTTP request, with the value ",(0,s.jsx)(t.code,{children:"Basic <base64-encoded-credentials>"}),"."]}),"\n",(0,s.jsx)(t.li,{children:"The server decodes the credentials and verifies them against the stored user information."}),"\n",(0,s.jsx)(t.li,{children:"If the credentials are valid, the server processes the request; otherwise, it returns an unauthorized response."}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"explain-like-im-5",children:"Explain like im 5??"}),"\n",(0,s.jsx)(t.p,{children:"Imagine you want to enter a secret clubhouse. To get in, you need to tell the guard your secret code. If you say the right code, the guard will let you in. If you say the wrong code or don't say any code, the guard won't let you in."}),"\n",(0,s.jsx)(t.h3,{id:"example-using-expressjs",children:"Example using Express.js"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'const express = require("express");\nconst app = express();\n\n// Middleware to parse the Authorization header\nconst basicAuth = (req, res, next) => {\n  const authHeader = req.headers.authorization;\n  if (authHeader) {\n    const credentials = Buffer.from(\n      authHeader.split(" ")[1],\n      "base64"\n    ).toString("ascii");\n    const [username, password] = credentials.split(":");\n    if (username === "admin" && password === "password") {\n      next();\n    } else {\n      res.status(401).json({ message: "Invalid credentials" });\n    }\n  } else {\n    res.status(401).json({ message: "Missing Authorization header" });\n  }\n};\n\n// GET /todos endpoint with Basic Authentication\napp.get("/todos", basicAuth, (req, res) => {\n  // Retrieve and return the list of todos\n  const todos = [\n    { id: 1, title: "Buy groceries" },\n    { id: 2, title: "Clean the house" },\n  ];\n  res.json(todos);\n});\n'})}),"\n",(0,s.jsx)(t.h2,{id:"2-api-key-authentication",children:"2. API Key Authentication"}),"\n",(0,s.jsx)(t.p,{children:"API Key Authentication involves providing a unique key to each client that needs to access the API. The client includes this key in the request headers or query parameters."}),"\n",(0,s.jsx)(t.h3,{id:"how-it-works-1",children:"How it works"}),"\n",(0,s.jsx)(t.p,{children:"The client includes the API key in the request headers or query parameters.\nThe server verifies the API key against the stored keys and grants access if it's valid.\nIf the API key is missing or invalid, the server returns an unauthorized response."}),"\n",(0,s.jsx)(t.h3,{id:"explain-like-im-5-1",children:"Explain like im 5"}),"\n",(0,s.jsx)(t.p,{children:"Imagine you have a special key that opens a locked treasure chest. If you have the right key, you can open the chest and see what's inside. If you don't have the key or use the wrong key, you can't open the chest."}),"\n",(0,s.jsx)(t.h3,{id:"example-using-expressjs-1",children:"Example using Express.js"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'const express = require("express");\nconst app = express();\n\n// Middleware to verify the API key\nconst apiKeyAuth = (req, res, next) => {\n  const apiKey = req.query.api_key;\n  if (apiKey === "my-secret-key") {\n    next();\n  } else {\n    res.status(401).json({ message: "Invalid API key" });\n  }\n};\n\n// GET /todos endpoint with API Key Authentication\napp.get("/todos", apiKeyAuth, (req, res) => {\n  // Retrieve and return the list of todos\n  const todos = [\n    { id: 1, title: "Buy groceries" },\n    { id: 2, title: "Clean the house" },\n  ];\n  res.json(todos);\n});\n\napp.listen(3000, () => {\n  console.log("Server is running on port 3000");\n});\n'})}),"\n",(0,s.jsx)(t.h2,{id:"3-jwt-authentication",children:"3. JWT Authentication"}),"\n",(0,s.jsx)(t.p,{children:"JSON Web Token (JWT) Authentication is a popular authentication mechanism that uses signed tokens to authenticate and authorize requests."}),"\n",(0,s.jsx)(t.h3,{id:"how-it-works-2",children:"How it works"}),"\n",(0,s.jsx)(t.p,{children:"The client sends credentials (e.g., username and password) to the server to obtain a JWT.\nThe server verifies the credentials, generates a JWT containing claims about the user, and signs it with a secret key.\nThe server sends the JWT back to the client.\nThe client includes the JWT in the Authorization header of subsequent requests.\nThe server verifies the JWT signature and extracts the claims to authenticate and authorize the request."}),"\n",(0,s.jsx)(t.h3,{id:"explain-like-im-5-2",children:"Explain like im 5"}),"\n",(0,s.jsx)(t.p,{children:"Imagine you have a special badge that proves you are allowed to enter a playground. When you want to enter, you show your badge to the playground guard. The guard checks if your badge is real and if it belongs to you. If everything is okay, the guard lets you play in the playground. You need to show your badge every time you want to enter."}),"\n",(0,s.jsx)(t.h3,{id:"example-using-expressjs-2",children:"Example using Express.js"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-javascript",children:'const express = require("express");\nconst jwt = require("jsonwebtoken");\nconst app = express();\n\n// Middleware to verify the JWT\nconst jwtAuth = (req, res, next) => {\n  const token = req.headers.authorization;\n  if (token) {\n    jwt.verify(token, "my-secret-key", (err, decoded) => {\n      if (err) {\n        res.status(401).json({ message: "Invalid token" });\n      } else {\n        req.userId = decoded.userId;\n        next();\n      }\n    });\n  } else {\n    res.status(401).json({ message: "Missing token" });\n  }\n};\n\n// GET /todos endpoint with JWT Authentication\napp.get("/todos", jwtAuth, (req, res) => {\n  // Retrieve and return the list of todos for the authenticated user\n  const todos = [\n    { id: 1, title: "Buy groceries", userId: req.userId },\n    { id: 2, title: "Clean the house", userId: req.userId },\n  ];\n  res.json(todos);\n});\n\napp.listen(3000, () => {\n  console.log("Server is running on port 3000");\n});\n'})}),"\n",(0,s.jsx)(t.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsxs)(t.p,{children:["These are security measures you can do to protect your APIs and data. But regardless of which, your server is still can get hit and be ",(0,s.jsx)(t.a,{href:"https://www.cloudflare.com/learning/ddos/what-is-a-ddos-attack/",children:"DDOS-ed"}),". How can we protect the server itself."]}),"\n",(0,s.jsx)(t.h3,{id:"solution-architecture",children:"Solution Architecture"}),"\n",(0,s.jsx)(t.p,{children:"What if we can have a security layer that is separate from our application."}),"\n",(0,s.jsx)(t.p,{children:"This security layer is basically another web server that has the ability to handle authentication."}),"\n",(0,s.jsx)(t.p,{children:"Attackers have to go through that layer before they hit our application, thus keeping our application safe."}),"\n",(0,s.jsx)(t.p,{children:"This is an example of what Solution Architecture is, being creative with how you organise your deployed applications on the cloud."}),"\n",(0,s.jsx)(t.h4,{id:"without-a-security-layer",children:"Without a security layer"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"no security layer",src:n(9155).A+"",width:"207",height:"313"})}),"\n",(0,s.jsx)(t.h4,{id:"with-a-security-layer",children:"With a security layer"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"security layer",src:n(2389).A+"",width:"176",height:"493"})}),"\n",(0,s.jsx)(t.h4,{id:"security-layer-using-aws",children:"Security layer using AWS"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"architecture diagram",src:n(8284).A+"",width:"475",height:"560"})})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},9155:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/no-security-layer-0b3fcf3ab4feb2cf5165d7667ab7e5e4.png"},2389:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/security-layer-7485e675299885b6b9fbbba8772517ce.png"},8284:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/architecture-488cdea1a715acae623f38b015429e02.png"},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var s=n(6540);const i={},a=s.createContext(i);function r(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);